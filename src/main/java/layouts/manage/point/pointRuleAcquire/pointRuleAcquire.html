<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>平台积分规则</title>
<#include "/manage/common/meta_js.html"/> 
<#include "/manage/common/meta_css.html"/>
</head>
<body>
<table id="dg" class="easyui-datagrid" data-options="
		singleSelect:true,
		rownumbers:true,
		pagination:true,
		fit:true,
		onBeforeLoad:onBeforeLoad,
		url:'/manage/pointRuleAcquire/acquire.html'
    ">
	<thead>
		<tr>
		<th data-options="field:'opt',width:130,formatter:opt,halign:'center',align:'center'">操作</th>
		<th data-options="field:'actionTypeName',halign:'center',align:'left'">动作分类</th>
		<th data-options="field:'actionName',halign:'center',align:'left'">名称</th>
		<th data-options="field:'algorithmsJson',formatter:jsonfmt,align:'right',halign:'center'">平台积分算法</th>
		<th data-options="field:'algorithmsJsonOrg',formatter:orgJsonfmt,align:'right',halign:'center'">机构积分算法</th>
		<th data-options="field:'actionDescription',halign:'center',align:'left'">描述</th>
		</tr>
	</thead>
</table>
<script type="text/javascript">
function opt(value,row){
	return "<a href='javascript:void(0)' onclick='modify("+row.actionCode+")'>修改</a>";
}
//修改
function modify(actionCode){
easyui_openNoResizeWindow("修改",500,180,"/manage/pointRuleAcquire/toAcquireEdit.html?actionCode="+actionCode,function(r){
	if(r){
		$('#dg').datagrid('reload');
	}
})
}
function onBeforeLoad(param){
	
}
function orgJsonfmt(value,row){
	if(value){
		return eval('('+value+')').point;
	}else{
		return "";
	}
}
function jsonfmt(value,row){
	if(value&&row.flagOrgValid==1){
		return eval('('+value+')').point;
	}else{
		return "--";
	}
}
</script>
</body>
</html>