<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<#include "/manage/common/meta_js.html"/> 
<#include "/manage/common/meta_css.html"/>
<title>教材版本</title>
</head>
<body>
<div id="tb">
<div class="labelBox">
	<div class="labelLine240">
	<span class="labelWidth60">学段：</span>
	<input id="section" class="easyui-combobox"   data-options="onChange:onChange,textField:'name',valueField:'code',editable:false">
	</div>
	<div class="labelLine240">
	<span  class="labelWidth90">学科：</span>
	<input id="subject" class="easyui-combobox"   data-options="textField:'name',valueField:'code',editable:false">
	</div>
	<div class="labelLine240">
	<span class="labelWidth60">教材版本：</span>
	<input id="name" placeholder="请输入教材版本">
	</div>
</div>
<div class="btnBox">
<a class="btn btnBlue search" onclick="reload()">查询</a>
<a class="btn btnBlue add" onclick="add()">新增</a>
</div>
</div>
<table id="dg"class="easyui-datagrid" 	data-options="
	    toolbar:'#tb',
	    fit:true,
	    rownumbers:true,
	    singleSelect:true,
	    onBeforeLoad:onBeforeLoad,
	    pagination:true,
	    url:'/manage/textbook/versionPageList.html'
	    ">
	    	<thead>
					<tr>
						<th data-options="field:'sectionName',width:80,halign:'center',align:'center'">学段</th>
						<th data-options="field:'subjectName',width:120,halign:'center',align:'left'">学科</th>
						<th data-options="field:'name',width:120,halign:'center',align:'left'">教材版本</th>
						<th data-options="field:'modifyTime',formatter:timefmt,width:120,halign:'center',align:'center'">更新时间</th>
						<th data-options="field:'description',width:200,halign:'center',align:'left'">描述</th>
					</tr>
				</thead>
 </table>
 <script type="text/javascript">
 var sectionList=eval(${sectionList});
 var defaultOpt={name:"不限",code:'-1'};
 $(function(){
	 sectionList.splice(0,0,defaultOpt)
 	$('#section').combobox('loadData',sectionList);
	 $('#section').combobox('select',-1);
 })
 //学段选择事件
function onChange(record){
		sectionSubject(record,$('#subject'))
}
 //查询
 function reload(){
	 $('#dg').datagrid('load') 
 }
 //新增
 function add(){
	 easyui_openNoResizeWindow("教材版本新增",600,400,"/manage/textbook/textbookVerAdd.html",function(){
		 reload();
	 }) 
 }
 function onBeforeLoad(param){
	 param["sectionCode"]=$('#section').combobox('getValue');
	 param["subjectCode"]=$('#subject').combobox('getValue');
	 param["name"]=$('#name').val();
 }
 </script>
</body>
</html>