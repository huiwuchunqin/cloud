<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>商品兑换列表</title> 
<#include "/manage/common/meta_js.html"/>
<#include "/manage/common/meta_css.html"/>
</head>
<body>
	<div id="tb" style="height: 30px">
	<div class="labelBox">
	<div class="labelLine320">
	<span class="labelWidth60">商品名称</span><input id="goodsName" placeholder="请输入商品名称"/>
	</div>
	</div>
	<div class="btnBox">
		<a class="btn btnBlue search" iconCls="icon-search" onclick="find()">查询</a>
	</div>
	</div>
	<table  id="dg" class="easyui-datagrid"
		data-options="
			onBeforeLoad:onBeforeLoad,
			singleSelect:true,
			rownumbers:true,
			toolbar:'#tb',
			fit:true,
			pagination:true,
			url:'/manage/pointConvertDetail/list.html'
        ">
		<thead>
			<tr>
				<th data-options="field:'goodsName',width:100,align:'left',halign:'center'">商品名称</th>
				<th data-options="field:'userName',width:100,align:'left',halign:'center'">用户姓名</th> 
				<th data-options="field:'goodsBizType',formatter:typefmt,width:100,align:'center',halign:'center'">商品业务类型</th>
				<th data-options="field:'convertDate',formatter:timefmt,width:100,align:'center',halign:'center'">转换日期</th>
				<th data-options="field:'convertAmount',width:80,align:'right',halign:'center'">兑换数量</th>
				<th data-options="field:'convertPoints',width:80,align:'right',halign:'center'">消耗积分</th>
				<th data-options="field:'memo',width:200,align:'left',halign:'center'">备注</th>
			</tr>
		</thead>
	</table>
	<script type="text/javascript">
		function onBeforeLoad(param) {
         param["goodsName"]=$('#goodsName').val();
		}
		//时间格式化 
		function timefmt(value) {
			return value ? moment(value).format("YYYY-MM-DD") : "";
		}
		//查询
		function find(){
			$('#dg').datagrid('reload');
		}
		//商品业务类型格式化
		function typefmt(value){
			switch(value){
			case "10":return "兑换商品";break;
			case "20":return "抽奖商品";break;
			default:break;
		 }
		}
	</script>
</body>