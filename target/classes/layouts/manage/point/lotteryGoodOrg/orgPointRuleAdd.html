<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>机构抽奖规则设置</title>
<#include "/manage/common/meta_js.html"/> <#include
"/manage/common/meta_css.html"/>
<style type="text/css">
.attrDiv>span:first-of-type{
width:100px
}
</style>
</head>
<body class="easyui-layout" data-options="fit:true">
	<div data-options="region:'north',border:false,fit:true">
	<form id="fm">
		<!-- <div class="attrDiv">
		<span>消费积分</span>
		<input id="point" class="easyui-numberbox" data-options="required:true,min:0,max:100000">
		</div> -->
		<div class="attrDiv">
		<span>日最大抽奖次数</span>
		 <input id="dayMaxTimes" class="easyui-numberbox" data-options="required:true,min:0,max:10000">
		</div>
		<div class="attrDiv">
		<span style="float:left">备注</span>
		 <textarea id="memo" class="easyui-validatebox"   maxlength="100" cols="20" rows="4"></textarea>
		</div>
		<input id="id" hidden="hidden">
	</form>
	</div>
	<div data-options="region:'south',border:false" style="text-align:center">
		<a class="btn btnConfirm"  onclick="save()" >保存</a>
		<a class="btn btnCancel"  onclick="easyui_closeTopWindow()" >取消</a>
	</div>
</body>
	<script type="text/javascript">
	var rule=eval(${orgRule});
	$(function(){
		if(rule){
			$('#id').val(rule.id);
		/* 	$('#point').numberbox('setValue',rule.point); */
			$('#dayMaxTimes').numberbox('setValue',rule.dayMaxTimes);
			$('#memo').val(rule.memo);	
		}
	})
	var issaving=false;
	function save(){
		if($('#fm').form('validate')&&!issaving){
			issaving=true;
			$.ajax({
				url:"/manage/orgPointRule/add.html",
				data:{
					/* point:$('#point').numberbox('getValue'), */
					point:0,
					dayMaxTimes:$('#dayMaxTimes').numberbox('getValue'),
					id:$('#id').val(),
					memo:$('#memo').val(),
				},
				success:function(res){
					issaving=false;
					$.messager.alert("信息",res.msg,"info",function(){
						easyui_closeTopWindow(res.success);
					});
					
				}
			})	
		}
	}
	</script>
</html>