<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>机构积分规则</title>
<#include "/manage/common/meta_js.html"/> <#include
"/manage/common/meta_css.html"/>
</head>
<body>
<div id="tb">
<a class="btn btnBlue" onclick="importDefault()">导入默认</a>
</div>
<table id="dg" class="easyui-datagrid" data-options="
		singleSelect:true,
		rownumbers:true,
		fitColumns: true,
		pagination:true,
		fit:true,
		toolbar:'#tb',
		onBeforeLoad:onBeforeLoad,
		url:'/manage/pointRuleAcquire/acquireOrg.html'
    ">
	<thead>
		<tr>
		<th data-options="field:'opt',width:100,formatter:opt,halign:'center',align:'center'">操作</th>
		<th data-options="field:'actionTypeName',width:150,halign:'center',align:'left'">动作分类</th>
		<th data-options="field:'actionName',width:150,halign:'center',align:'left'">名称</th>
		<th data-options="field:'algorithmsJsonOrg',width:150,formatter:jsonfmt,align:'center',halign:'center'">机构积分算法</th>
		<th data-options="field:'actionDescription',width:400,halign:'center',align:'left'">描述</th>
		</tr>
	</thead>
</table>
<script type="text/javascript">
function opt(value,row){
	return "<a href='javascript:void(0)' onclick='modify("+row.id+")'>修改</a>";
}
//修改
function modify(id){
easyui_openNoResizeWindow("修改",500,150,"/manage/pointRuleAcquire/toAcquireOrgEdit.html?id="+id,function(r){
	if(r){
		$('#dg').datagrid('reload');
	}
})
}
function onBeforeLoad(param){
	
}
function jsonfmt(value,row){
	if(value){
		return eval('('+value+')').point;
	}else{
		return "--";
	}
}
//导入默认
function importDefault(){
	$.ajax({
		url:"/manage/pointRuleAcquire/importPlatToOrg.html",
		type:'post',
		success:function(res){
			alert(res.msg);
			if(res.success){
				$('#dg').datagrid('reload');
			}
		}
	})
}
</script>
</body>
</html>