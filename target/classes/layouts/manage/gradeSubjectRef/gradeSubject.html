<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<#include "/manage/common/meta_js.html"/> 
<#include "/manage/common/meta_css.html"/>
<script type="text/javascript" src="/manage/template/comboChange/comboChange.js"></script>
<title>年级学科</title>
</head>
<body>
<div id="tb">
<div class="box form">
<div class="labelBox">
	<div class="labelLine240">
	<label  class="labelWidth60">学段</label>
	<input class="easyui-combobox"  id="section" data-options="onSelect:sectionSelect,textField:'name',valueField:'code',editable:false">
	</div>
	<div class="labelLine240">
	<label  class="labelWidth60">年级</label> 
	<input class="easyui-combobox"  id="grade" data-options="data:[{name:'请选择学段',code:''}],textField:'name',valueField:'code',editable:false">
	</div>
</div>
<div class="btnBox">
<a class="btn btnBlue" data-options="iconCls:'icon-search'" onclick="javascript:$('#dg').datagrid('reload')"><img src="/manage/template/images/search.png">查询</a>
</div>
</div>
</div>
<table id="dg"class="easyui-datagrid" 	data-options="
	    toolbar:'#tb',
	    fit:true,
	    pagination:true,
	    rownumbers:true,
	    singleSelect:true,
	    onBeforeLoad:onBeforeLoad,
	    url:'/manage/gradeSubjectRef/gradeSubejctPage.html'
	    ">
	    	<thead>
					<tr>
						<th data-options="field:'gradeName',width:80,halign:'center',align:'left'">年级</th>
						<th data-options="field:'name',width:80,halign:'center',align:'left'">学科</th>
					<!-- 	<th data-options="field:'createTime',width:140,align:'center',halign:'center',formatter:timefmt,headalign:'center'">设置时间</th> -->
						<th data-options="field:'dispOrder',halign:'center',width:50,align:'right'">顺序</th>
						<th data-options="field:'description',width:450,halign:'center',align:'left'">描述</th>
					    <th data-options="field:'id',width:120,hidden:true">id</th> 
					</tr>
				</thead>
 </table>
 <script type="text/javascript">
 var sectionList=eval(${sectionList});
 $(function(){
	 sectionList.unshift({code:"",name:"全部"})
 	$('#section').combobox('loadData',sectionList);
 })
 //学段选择事件
function onselect(){
	$('#dg').datagrid('load')
}
 function onBeforeLoad(param){
	 param["gradeCode"]=$('#grade').combobox('getValue');
 }
 function sectionSelect(record){
	 sectionGrade(record.code,$('#grade')) 
 }
 </script>
</body>
</html>