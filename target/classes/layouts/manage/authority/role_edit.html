<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>编辑角色</title>
<#include "/manage/common/meta_js.html"/>
<#include "/manage/common/meta_css.html"/>
</head>
<body>
    <div class="easyui-layout" data-options="fit:true">
	<form id="fm" method="post" style="margin-left: 20px" onsubmit="">
    <div data-options="region:'center',border:false">
		<div class="attrDiv400">
			<div class="labelWidth90">
				角色名称<span style="color: red">※</span>
			</div>
			<input id="name" class="easyui-validatebox" maxlength="15"
				data-options="validType:'length[0,15]',required:true">
		</div>
		<span class="clear" style="height: 15px"></span>
		<div style="float: left; width: 450px">
			<div class="labelWidth90">备&nbsp;注</div>
			<textarea id="memo" name="memo" maxlength="100"
				class="easyui-validatebox" data-options="validType:'length[0,100]'"
				rows="5" cols="40"></textarea>
		</div>
	</div>
		<div data-options="region:'south',border:false" style="text-align: right; padding: 0 10px 10px 0;">
			<a class="btn btnBlue" onclick="save()">保存</a>
			<a class="btn btnGrey" onclick="cancelAdd()" style="margin-left: 10px;">关闭</a>
		</div>
	</form>
	</div>
	<script type="text/javascript">
	 var role="";
	 $(function() {
			<#if "${role}" != "">
			    role=$.parseJSON('${role}');
				$('#name').val(role.name);
				$('#memo').val(role.memo);
			</#if>
	 })

	//保存操作
	function save() {
			if ($('#fm').form('validate')) {
				var name=$('#name').val();
				var memo=$('#memo').val();
				var opts = {
					url : "/manage/role/addRole.html",
					type : "POST",
					data : {
						name:name,
						memo:memo
						<#if "${isModify}" == true>
						,id:role.id
						</#if>
					},
					success : function(jsonStr) {
						var res=jsonStr;
						window.top.$.messager.alert("提示", res.msg, "info");
						if(res.success){
							easyui_closeTopWindow(true);
						}
					},
					error : function(XMLHttpRequest, textStatus, errorThrown) {
						alert("网络繁忙请稍后再试");
					},
					complete : function() {
						
					}
				}
				$.ajax(opts);
		}
	}
	
	//取消操作
	function cancelAdd() {
		easyui_closeTopWindow();
	}
	
	//校验表单必填项是否有空值
	function checkForm(){
		var name=$("#name").val().trim();
		if(name==null||name==""){
			window.top.$.messager.alert("提示", "角色名称不能为空！", "info");
			return false;
		}
		return true;
	}
</script>
</body>
</html>